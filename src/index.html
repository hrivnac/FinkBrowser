<html>

<head>
<title>Fink Data Explorer</title>
</head>

<style>
  iframe {
    border: 1px solid black;
    width: 100%;
    background: #dddddd;
    }
  </style>

<body>

<table><tr>
<td><img src="Fink.png" width="100"/></td>
<td><h1>Fink Data Explorer</h1>
<h4>@VERSION@ [@BUILD@]</h3>
</tr></table>
<hr/>

<h2><a href="http://134.158.74.221:8080/FinkBrowser/?profile=ijclabe">Prototype running @IJCLab</a> (under development)</h2>
<hr/>

<h2>Documentation</h2>

<ul>
<li><a href="JavaDoc">JavaDoc</a></li>
<li><a href="Src">Source</a></li>
<li><a href="build.jpg">Ant build dependencies</a></li>
<li><a href="index.jpg">Class diagram</a></li>
<li><a href="https://github.com/hrivnac/FinkBrowser.git">https://github.com/hrivnac/FinkBrowser.git</a></li>
<li>Externals:
    <a href="https://www.java.com">Java</a>,
    <a href="https://cern.ch/hrivnac/Activities/Packages/Lomikel">Lomikel</a> (and others used by it),
    <a href="https://github.com/cds-astro/cds-healpix-java">HealPix</a>,
    <a href="http://www.jython.org">Jython</a> (for Jython client, optional),
    <a href="http://www.jpype.org">JPype</a> (for CPython client, optional),
    <a href="http://sagemath.org">Sage</a> (to perform math analyses, optional),
    <a href="http://matplotlib.org">MatPlotLib</a> (to perform math analyses, optional),
    <a href="http://jupyter.org">Jupyter</a> (to run in a Notebook),
    <a href="https://github.com/scijava/scijava-jupyter-kernel">SciJava Jupyter kernel</a> (for Java Notebook)
    </li>
<li>Tools:
    <a href="https://ant.apache.org">Ant</a>,
    <a href="http://www.java2html.com">J2H</a>,
    <a href="http://vizant.sourceforge.net">Vizant</a>,
    <a href="https://github.com/dspinellis/UMLGraph">UmlGraph</a>,
    <a href="http://findbugs.sourceforge.net">FindBugs</a>,
    CleanImports,
    <a href="https://code.google.com/archive/p/apiviz">ApiViz</a>,
    <a href="https://github.com/clarkware/jdepend">JDepend</a></li>
</ul>
<hr/>

<h2><a name="Graph">Graph</a></h2>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/gremlin/schema.gremlin">schema</a>:</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/gremlin/schema.gremlin" seamless></iframe>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/gremlin/index.gremlin">index</a>:</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/gremlin/index.gremlin" seamless></iframe>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/gremlin/astrolabnet-IJCLab.gremlin">top-level structure</a>:</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/gremlin/astrolabnet-IJCLab.gremlin" seamless></iframe>

<hr/>

<h2><a name="WebService">Web Service</a></h2>
<table>
<tr><td><a href="FinkBrowser.jpg" ><img src="FinkBrowser.jpg"  width="600"></a></td></tr>
<tr><td><a href="FinkBrowser1.jpg"><img src="FinkBrowser1.jpg" width="600"></a></td></tr>
<tr><td><a href="FinkBrowser2.jpg"><img src="FinkBrowser2.jpg" width="600"></a></td></tr>
<tr><td><a href="FinkBrowser3.jpg"><img src="FinkBrowser3.jpg" width="600"></a></td></tr>
<tr><td><a href="FinkBrowser4.jpg"><img src="FinkBrowser4.jpg" width="600"></a></td></tr>
</table>
<b><u>Customisation</u></b>
<ul>
<li><tt>Servers-&lt;target&gt;.jsp</tt> contains the list of <em>Gremlin</em> servets</li>
<li><tt>Graphs-&lt;target&gt;.jsp</tt> contains the list of initial graphs, formed as <em>Gremlin</em> queries</li>
<li><tt>bootgreamlin</tt> property contains the specific <em>Gremlin</em> query</li>
</ul>
<b><u>Options</u></b>
<ul>
<li><tt>profile</tt> for initial calls (<tt>null, test, local, ijclab</tt>)</li>
<li><tt>style</tt> for pane setup (<tt>null, test, simple</tt>)</li>
</ul>
<hr/>

<h2><a name="CLI">Command Line</a></h2>
Command line (executable Java) can be downloaded from the repository:
<a href="http://cern.ch/hrivnac/Activities/Packages/FinkBrowser.exe.jar">FinkBrowser.exe.jar</a>.
It serves as a foundation for all clients.
<pre style="color:blue; font-size:60%; background-color:#eeeeee">
$ java -jar FinkBrowser.exe.jar -h
usage: java -jar Lomikel.exe.jar
 -b,--batch           run in a batch
 -g,--gui             run in a graphical window
 -h,--help            show help
 -q,--quiet           minimal direct feedback
 -s,--source &lt;file&gt;   source bsh file (init.bsh is also read)
</pre>
It allows <a href="https://beanshell.github.io">BeanShell</a>/Java scripting, with Python and <a href="http://sagemath.org">SageMath</a> interface. 
<br/>
<h3>Access to HBase</h3>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/bsh/testHBaseClient.bsh">BeanShell/Java example</a>:</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/bsh/testHBaseClient.bsh" seamless></iframe>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/python/testHBaseClient.jy">Jython example</a> (needs <a href="http://www.jython.org">Jython</a>):</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/python/testHBaseClient.jy" seamless></iframe>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/python/testHBaseClient.py">CPython example</a> (needs <a href="http://www.jpype.org">JPype</a>):</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/python/testHBaseClient.py" seamless></iframe>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/python/testHBaseClient.sage">Sage example</a> (needs also <a href="http://sagemath.org">SageMath</a>):</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/python/testHBaseClient.sage" seamless></iframe>
<a href="SageExample.jpg" ><img src="SageExample.jpg"  width="400"></a><br/>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/python/testHBaseClient_matplotlib.py">CPython example with graphics</a> (needs also <a href="http://matplotlib.org">MatPlotLib</a>):</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/python/testHBaseClient_matplotlib.py" seamless></iframe>
<a href="MatplotlibExample.jpg" ><img src="MatplotlibExample.jpg"  width="400"></a>
<h3>Access to JanusGraph</h3>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/bsh/testGremlinClient.bsh">BeanShell/Java example</a>:</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/bsh/testGremlinClient.bsh" seamless></iframe>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/python/testGremlinClient.jy">Jython example</a> (needs <a href="http://www.jython.org">Jython</a>):</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/python/testGremlinClient.jy" seamless></iframe>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/bsh/testClients.bsh">Full example, connecting to both databases</a> (Java version):</b></u>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/bsh/testClients.bsh" seamless></iframe>
</pre>
<u><b>Another usefull methods:</b></u>
<pre style="color:blue; font-size:60%; background-color:#dddddd">
// Return not only exact results, but all rows in between
client.setRangeScan(true);
// Get time dependence of column value
// (using HBase timestamp for HBaseClient, i:jd for FinkHBaseClient)
results = client.timeline("i:dec", null);
// Get latest values for a column
// (using HBase timestamp for HBaseClient, i:jd for FinkHBaseClient)
results = client.latests("i:dec", null, 5000, false);
// Get the alerts from time interval
// (using Julian Date, for FinkHBaseClient)
results = client.search("2458860", "2458861", true, "i:ra,i:dec", true, true);
// Get alerts in a cone around ra*dec direction
// (using degrees, for FinkHBaseClient)
results = client.search(59.8990234, 50.2781216, 5.0/3600.0, "i:ra,i:dec", false, false);
// Convert results (as a Map) into readable String
client.results2String(results)
// Convert results (as a Map) into a List
client.results2List(results)
// Set columns, which should be always received
// (* gives all)
client.setAlwaysColumns("i:ra,i:dec")
// Add columns, which should be always received
// (* gives all)
client.addAlwaysColumns("i:ra,i:dec")
// Request all results in between searched results
client.setRangeScan(true)
</pre>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/Jupyter/TestHBaseClient-SciJava.nb">Running in Jupyter/SciJava</a>:</b></u><br/>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/Jupyter/TestHBaseClient-SciJava.nb" seamless></iframe>
<a href="Jupyter-SciJava.jpg"><img src="Jupyter-SciJava.jpg" width="400"></a><br/>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/Jupyter/TestHBaseClient-Python3.nb">Running in Jupyter/Python3</a>:</b></u><br/>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/Jupyter/TestHBaseClient-Python3.nb" seamless></iframe>
<a href="Jupyter-Python3.jpg"><img src="Jupyter-Python3.jpg" width="400"></a><br/>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/Jupyter/TestHBaseClient-SageMath.nb">Running in Jupyter/SageMath</a>:</b></u><br/>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/Jupyter/TestHBaseClient-SageMath.nb" seamless></iframe>
<a href="Jupyter-SageMath.jpg"><img src="Jupyter-SageMath.jpg" width="400"></a>
<u><b><a href="https://github.com/hrivnac/FinkBrowser/blob/master/src/gremlin/test.gremlin">Running in Gremlin console</a>:</b></u><br/>
<iframe src="https://raw.githubusercontent.com/hrivnac/FinkBrowser/master/src/gremlin/test.gremli" seamless></iframe>
<hr/>

<h2><a name="Bugs-ToDos">Bugs, Inconsistencies and ToDos</a></h2>
<b><u>Bugs</u></b>
<ul>
<li>...</li>
</ul>
<b><u>Inconsistencies</u></b>
<ul>
<li>...</li>
</ul>
<b><u>ToDos</u></b>
<ul>
<li>...</li>
</ul>
<hr/>

<h2><a name="Releases">Release History</a></h2>
<ul>
<li><u>00.01.00:</u>
    <ul>
    <li>Initial release.</li>
    </ul></li>
<li><u>00.01.00:</u>
    <ul>
    <li>Usable, based on JHtools 00.04.00.</li>
    </ul></li>
<li><u>00.02.00:</u>
    <ul>
    <li>REST HBase connection.</li>
    </ul></li>
<li><u>00.03.00:</u>
    <ul>
    <li>Direct HBase connection.</li>
    <li>Latest alerts with expansion.</li>
    <li>CLI.</li>
    </ul></li>
<li><u>00.04.00:</u>
    <ul>
    <li>Better CLI,GUI.</li>
    <li>Faster HBase.</li>
    </ul></li>
<li><u>00.05.00:</u>
    <ul>
    <li>Callable from Python.</li>
    <li>Callable from Sage Math.</li>
    </ul></li>
<li><u>00.05.02:</u>
    <ul>
    <li>Better WS.</li>
    <li>Link from HBase table to Graph.</li>
    </ul></li>
<li><u>00.06.00:</u>
    <ul>
    <li>Included Gremlin client.</li>
    <li>Specific FinkHBaseClient.</li>
    <li>FinkHBaseClient.timeline and latests implemented.</li>
    </ul></li>
<li><u>00.07.00:</u>
    <ul>
    <li>Adding cone search with Healpix.</li>
    <li>Creating aux healpix table.</li>
    <li>FinkHBaseClient.latests(...) gives results in reverse order.</li>
    <li>Scatterplot and Evoltionplot.</li>
    </ul></li>
<li><u>00.08.00:</u>
    <ul>
    <li>Scatterplot and Evolutionplot consolidated and improved.</li>
    </ul></li>
<li><u>00.09.00:</u>
    <ul>
    <li>Custom and Range selectors moved to Lomikel.</li>
    <li>Sky View.</li>
    <li>Links from plots to hbase table.</li>
    </ul></li>
<li><u>00.10.00:</u>
    <ul>
    <li>Populating graph from HBase.</li>
    <li>Working in IJCLab.</li>
    </ul></li>
<li><u>*.*.*:</u>
    <ul>
    <li>Adding Gremlin schema and index.</li>
    </ul></li>
</ul>
<hr/>

<h2>Related Documentation</h2>
<ul>
<li><a href="http://cern.ch/hrivnac/Activities/Packages/Lomikel">Lomikel</a></li>
</ul>
<hr/>

<h4><a name="Presentations">Presentations</a></h4>
<ul>
<li><u>2020:</u>
    <ul>
    <li><a href="https://hrivnac.web.cern.ch/hrivnac/Activities/2020/October/FinkBrowser">Fink Browser</a> (LSST, IJCLab, October'20)</li>
    </ul></li>
<li><u>2021:</u>
    <ul>
    <li><a href="https://hrivnac.web.cern.ch/hrivnac/Activities/2021/January/GraphDataExplorer">Graph and Data Explorer</a> (LSST, IJCLab, January'21)</li>
    </ul></li>
</ul>
</p>
<hr/>

<img width="0" height="0" src="http://cern.ch/hrivnac/cgi-bin/record.pl?page=FinkBrowser"> 
<address>
<a href="http://cern.ch/hrivnac">J.Hrivnac</a> @BUILD@
</address>
</body>
</html>
